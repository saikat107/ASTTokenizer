<METHOD_START> @ Before public void void ( ) java.lang.Exception { org.springframework.orm.jpa.support.EntityManagerFactory = mock ( EntityManagerFactory .class ) ; org.springframework.orm.jpa.support.EntityManager = mock ( EntityManager .class ) ; given ( org.springframework.orm.jpa.support.EntityManagerFactory . createEntityManager ( ) ) . willReturn ( org.springframework.orm.jpa.support.EntityManager ) ; this . org.springframework.orm.jpa.support.MockHttpServletRequest = new MockHttpServletRequest ( ) ; this . org.springframework.orm.jpa.support.MockHttpServletRequest . setAsyncSupported ( true ) ; this . org.springframework.orm.jpa.support.MockHttpServletResponse = new MockHttpServletResponse ( ) ; this . org.springframework.orm.jpa.support.ServletWebRequest = new ServletWebRequest ( this . org.springframework.orm.jpa.support.MockHttpServletRequest ) ; }  <METHOD_END>
<METHOD_START> @ After public void void ( ) java.lang.Exception { assertTrue ( TransactionSynchronizationManager . getResourceMap ( ) . isEmpty ( ) ) ; assertFalse ( TransactionSynchronizationManager . isSynchronizationActive ( ) ) ; assertFalse ( TransactionSynchronizationManager . isCurrentTransactionReadOnly ( ) ) ; assertFalse ( TransactionSynchronizationManager . isActualTransactionActive ( ) ) ; }  <METHOD_END>
<METHOD_START> @ Test public void void ( ) java.lang.Exception { OpenEntityManagerInViewInterceptor org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor = new OpenEntityManagerInViewInterceptor ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . setEntityManagerFactory ( this . org.springframework.orm.jpa.support.EntityManagerFactory ) ; MockServletContext org.springframework.orm.jpa.support.MockServletContext = new MockServletContext ( ) ; MockHttpServletRequest org.springframework.orm.jpa.support.MockHttpServletRequest = new MockHttpServletRequest ( org.springframework.orm.jpa.support.MockServletContext ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) ) ; assertTrue ( TransactionSynchronizationManager . hasResource ( this . org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; given ( org.springframework.orm.jpa.support.EntityManager . isOpen ( ) ) . willReturn ( true ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; verify ( org.springframework.orm.jpa.support.EntityManager ) . close ( ) ; }  <METHOD_END>
<METHOD_START> @ Test public void void ( ) java.lang.Exception { OpenEntityManagerInViewInterceptor org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor = new OpenEntityManagerInViewInterceptor ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . setEntityManagerFactory ( org.springframework.orm.jpa.support.EntityManagerFactory ) ; given ( org.springframework.orm.jpa.support.EntityManagerFactory . createEntityManager ( ) ) . willReturn ( this . org.springframework.orm.jpa.support.EntityManager ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( this . org.springframework.orm.jpa.support.ServletWebRequest ) ; assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; AsyncWebRequest org.springframework.orm.jpa.support.AsyncWebRequest = new StandardServletAsyncWebRequest ( this . org.springframework.orm.jpa.support.MockHttpServletRequest , this . org.springframework.orm.jpa.support.MockHttpServletResponse ) ; WebAsyncManager org.springframework.orm.jpa.support.WebAsyncManager = WebAsyncUtils . getAsyncManager ( this . org.springframework.orm.jpa.support.ServletWebRequest ) ; org.springframework.orm.jpa.support.WebAsyncManager . setTaskExecutor ( new org.springframework.orm.jpa.support.OpenEntityManagerInViewTests.SyncTaskExecutor ( ) ) ; org.springframework.orm.jpa.support.WebAsyncManager . setAsyncWebRequest ( org.springframework.orm.jpa.support.AsyncWebRequest ) ; org.springframework.orm.jpa.support.WebAsyncManager . startCallableProcessing ( new java.util.concurrent.Callable<java.lang.String> < java.lang.String > ( ) { @ java.lang.Override public java.lang.String java.lang.String ( ) java.lang.Exception { return STRING ; } } ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterConcurrentHandlingStarted ( this . org.springframework.orm.jpa.support.ServletWebRequest ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( this . org.springframework.orm.jpa.support.ServletWebRequest ) ; assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.WebAsyncManager . clearConcurrentResult ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( new ServletWebRequest ( org.springframework.orm.jpa.support.MockHttpServletRequest ) , null ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . postHandle ( this . org.springframework.orm.jpa.support.ServletWebRequest , null ) ; assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; given ( this . org.springframework.orm.jpa.support.EntityManager . isOpen ( ) ) . willReturn ( true ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterCompletion ( this . org.springframework.orm.jpa.support.ServletWebRequest , null ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; verify ( this . org.springframework.orm.jpa.support.EntityManager ) . close ( ) ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public java.lang.String java.lang.String ( ) java.lang.Exception { return STRING ; }  <METHOD_END>
<METHOD_START> @ Test public void void ( ) java.lang.Exception { OpenEntityManagerInViewInterceptor org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor = new OpenEntityManagerInViewInterceptor ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . setEntityManagerFactory ( org.springframework.orm.jpa.support.EntityManagerFactory ) ; given ( this . org.springframework.orm.jpa.support.EntityManagerFactory . createEntityManager ( ) ) . willReturn ( this . org.springframework.orm.jpa.support.EntityManager ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . preHandle ( this . org.springframework.orm.jpa.support.ServletWebRequest ) ; assertTrue ( TransactionSynchronizationManager . hasResource ( this . org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; AsyncWebRequest org.springframework.orm.jpa.support.AsyncWebRequest = new StandardServletAsyncWebRequest ( this . org.springframework.orm.jpa.support.MockHttpServletRequest , this . org.springframework.orm.jpa.support.MockHttpServletResponse ) ; WebAsyncManager org.springframework.orm.jpa.support.WebAsyncManager = WebAsyncUtils . getAsyncManager ( this . org.springframework.orm.jpa.support.MockHttpServletRequest ) ; org.springframework.orm.jpa.support.WebAsyncManager . setTaskExecutor ( new org.springframework.orm.jpa.support.OpenEntityManagerInViewTests.SyncTaskExecutor ( ) ) ; org.springframework.orm.jpa.support.WebAsyncManager . setAsyncWebRequest ( org.springframework.orm.jpa.support.AsyncWebRequest ) ; org.springframework.orm.jpa.support.WebAsyncManager . startCallableProcessing ( new java.util.concurrent.Callable<java.lang.String> < java.lang.String > ( ) { @ java.lang.Override public java.lang.String java.lang.String ( ) java.lang.Exception { return STRING ; } } ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor . afterConcurrentHandlingStarted ( this . org.springframework.orm.jpa.support.ServletWebRequest ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( this . org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; given ( this . org.springframework.orm.jpa.support.EntityManager . isOpen ( ) ) . willReturn ( true ) ; MockAsyncContext org.springframework.orm.jpa.support.MockAsyncContext = ( MockAsyncContext ) this . org.springframework.orm.jpa.support.MockHttpServletRequest . getAsyncContext ( ) ; for ( AsyncListener org.springframework.orm.jpa.support.AsyncListener : org.springframework.orm.jpa.support.MockAsyncContext . getListeners ( ) ) { org.springframework.orm.jpa.support.AsyncListener . onTimeout ( new AsyncEvent ( org.springframework.orm.jpa.support.MockAsyncContext ) ) ; } for ( AsyncListener org.springframework.orm.jpa.support.AsyncListener : org.springframework.orm.jpa.support.MockAsyncContext . getListeners ( ) ) { org.springframework.orm.jpa.support.AsyncListener . onComplete ( new AsyncEvent ( org.springframework.orm.jpa.support.MockAsyncContext ) ) ; } verify ( this . org.springframework.orm.jpa.support.EntityManager ) . close ( ) ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public java.lang.String java.lang.String ( ) java.lang.Exception { return STRING ; }  <METHOD_END>
<METHOD_START> @ Test public void void ( ) java.lang.Exception { given ( org.springframework.orm.jpa.support.EntityManager . isOpen ( ) ) . willReturn ( true ) ; final EntityManagerFactory org.springframework.orm.jpa.support.EntityManagerFactory = mock ( EntityManagerFactory .class ) ; final EntityManager org.springframework.orm.jpa.support.EntityManager = mock ( EntityManager .class ) ; given ( org.springframework.orm.jpa.support.EntityManagerFactory . createEntityManager ( ) ) . willReturn ( org.springframework.orm.jpa.support.EntityManager ) ; given ( org.springframework.orm.jpa.support.EntityManager . isOpen ( ) ) . willReturn ( true ) ; MockServletContext org.springframework.orm.jpa.support.MockServletContext = new MockServletContext ( ) ; StaticWebApplicationContext org.springframework.orm.jpa.support.StaticWebApplicationContext = new StaticWebApplicationContext ( ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . setServletContext ( org.springframework.orm.jpa.support.MockServletContext ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . getDefaultListableBeanFactory ( ) . registerSingleton ( STRING , org.springframework.orm.jpa.support.EntityManagerFactory ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . getDefaultListableBeanFactory ( ) . registerSingleton ( STRING , org.springframework.orm.jpa.support.EntityManagerFactory ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . refresh ( ) ; org.springframework.orm.jpa.support.MockServletContext . setAttribute ( WebApplicationContext . ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE , org.springframework.orm.jpa.support.StaticWebApplicationContext ) ; MockHttpServletRequest org.springframework.orm.jpa.support.MockHttpServletRequest = new MockHttpServletRequest ( org.springframework.orm.jpa.support.MockServletContext ) ; MockHttpServletResponse org.springframework.orm.jpa.support.MockHttpServletResponse = new MockHttpServletResponse ( ) ; MockFilterConfig org.springframework.orm.jpa.support.MockFilterConfig = new MockFilterConfig ( org.springframework.orm.jpa.support.StaticWebApplicationContext . getServletContext ( ) , STRING ) ; MockFilterConfig org.springframework.orm.jpa.support.MockFilterConfig = new MockFilterConfig ( org.springframework.orm.jpa.support.StaticWebApplicationContext . getServletContext ( ) , STRING ) ; org.springframework.orm.jpa.support.MockFilterConfig . addInitParameter ( STRING , STRING ) ; final OpenEntityManagerInViewFilter org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter = new OpenEntityManagerInViewFilter ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . init ( org.springframework.orm.jpa.support.MockFilterConfig ) ; final OpenEntityManagerInViewFilter org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter = new OpenEntityManagerInViewFilter ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . init ( org.springframework.orm.jpa.support.MockFilterConfig ) ; final FilterChain org.springframework.orm.jpa.support.FilterChain = new FilterChain ( ) { @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse ) { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.ServletRequest . setAttribute ( STRING , java.lang.Boolean . java.lang.Boolean ) ; } } ; final FilterChain org.springframework.orm.jpa.support.FilterChain = new FilterChain ( ) { @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse )				throws java.io.IOException , org.springframework.orm.jpa.support.ServletException { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . doFilter ( org.springframework.orm.jpa.support.ServletRequest , org.springframework.orm.jpa.support.ServletResponse , org.springframework.orm.jpa.support.FilterChain ) ; } } ; FilterChain org.springframework.orm.jpa.support.FilterChain = new PassThroughFilterChain ( org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter , org.springframework.orm.jpa.support.FilterChain ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . doFilter ( org.springframework.orm.jpa.support.MockHttpServletRequest , org.springframework.orm.jpa.support.MockHttpServletResponse , org.springframework.orm.jpa.support.FilterChain ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertNotNull ( org.springframework.orm.jpa.support.MockHttpServletRequest . getAttribute ( STRING ) ) ; verify ( org.springframework.orm.jpa.support.EntityManager ) . close ( ) ; verify ( org.springframework.orm.jpa.support.EntityManager ) . close ( ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . close ( ) ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse ) { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.ServletRequest . setAttribute ( STRING , java.lang.Boolean . java.lang.Boolean ) ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse )				throws java.io.IOException , org.springframework.orm.jpa.support.ServletException { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . doFilter ( org.springframework.orm.jpa.support.ServletRequest , org.springframework.orm.jpa.support.ServletResponse , org.springframework.orm.jpa.support.FilterChain ) ; }  <METHOD_END>
<METHOD_START> @ Test public void void ( ) java.lang.Exception { given ( org.springframework.orm.jpa.support.EntityManager . isOpen ( ) ) . willReturn ( true ) ; final EntityManagerFactory org.springframework.orm.jpa.support.EntityManagerFactory = mock ( EntityManagerFactory .class ) ; final EntityManager org.springframework.orm.jpa.support.EntityManager = mock ( EntityManager .class ) ; given ( org.springframework.orm.jpa.support.EntityManagerFactory . createEntityManager ( ) ) . willReturn ( org.springframework.orm.jpa.support.EntityManager ) ; given ( org.springframework.orm.jpa.support.EntityManager . isOpen ( ) ) . willReturn ( true ) ; MockServletContext org.springframework.orm.jpa.support.MockServletContext = new MockServletContext ( ) ; StaticWebApplicationContext org.springframework.orm.jpa.support.StaticWebApplicationContext = new StaticWebApplicationContext ( ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . setServletContext ( org.springframework.orm.jpa.support.MockServletContext ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . getDefaultListableBeanFactory ( ) . registerSingleton ( STRING , org.springframework.orm.jpa.support.EntityManagerFactory ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . getDefaultListableBeanFactory ( ) . registerSingleton ( STRING , org.springframework.orm.jpa.support.EntityManagerFactory ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . refresh ( ) ; org.springframework.orm.jpa.support.MockServletContext . setAttribute ( WebApplicationContext . ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE , org.springframework.orm.jpa.support.StaticWebApplicationContext ) ; MockFilterConfig org.springframework.orm.jpa.support.MockFilterConfig = new MockFilterConfig ( org.springframework.orm.jpa.support.StaticWebApplicationContext . getServletContext ( ) , STRING ) ; MockFilterConfig org.springframework.orm.jpa.support.MockFilterConfig = new MockFilterConfig ( org.springframework.orm.jpa.support.StaticWebApplicationContext . getServletContext ( ) , STRING ) ; org.springframework.orm.jpa.support.MockFilterConfig . addInitParameter ( STRING , STRING ) ; final OpenEntityManagerInViewFilter org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter = new OpenEntityManagerInViewFilter ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . init ( org.springframework.orm.jpa.support.MockFilterConfig ) ; final OpenEntityManagerInViewFilter org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter = new OpenEntityManagerInViewFilter ( ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . init ( org.springframework.orm.jpa.support.MockFilterConfig ) ; final java.util.concurrent.atomic.AtomicInteger java.util.concurrent.atomic.AtomicInteger = new java.util.concurrent.atomic.AtomicInteger ( NUMBER ) ; final FilterChain org.springframework.orm.jpa.support.FilterChain = new FilterChain ( ) { @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse ) { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.ServletRequest . setAttribute ( STRING , java.lang.Boolean . java.lang.Boolean ) ; java.util.concurrent.atomic.AtomicInteger . int ( ) ; } } ; final java.util.concurrent.atomic.AtomicInteger java.util.concurrent.atomic.AtomicInteger = new java.util.concurrent.atomic.AtomicInteger ( NUMBER ) ; final FilterChain org.springframework.orm.jpa.support.FilterChain = new FilterChain ( ) { @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse )				throws java.io.IOException , org.springframework.orm.jpa.support.ServletException { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . doFilter ( org.springframework.orm.jpa.support.ServletRequest , org.springframework.orm.jpa.support.ServletResponse , org.springframework.orm.jpa.support.FilterChain ) ; java.util.concurrent.atomic.AtomicInteger . int ( ) ; } } ; FilterChain org.springframework.orm.jpa.support.FilterChain = new PassThroughFilterChain ( org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter , org.springframework.orm.jpa.support.FilterChain ) ; AsyncWebRequest org.springframework.orm.jpa.support.AsyncWebRequest = mock ( AsyncWebRequest .class ) ; given ( org.springframework.orm.jpa.support.AsyncWebRequest . isAsyncStarted ( ) ) . willReturn ( true ) ; WebAsyncManager org.springframework.orm.jpa.support.WebAsyncManager = WebAsyncUtils . getAsyncManager ( this . org.springframework.orm.jpa.support.MockHttpServletRequest ) ; org.springframework.orm.jpa.support.WebAsyncManager . setTaskExecutor ( new org.springframework.orm.jpa.support.OpenEntityManagerInViewTests.SyncTaskExecutor ( ) ) ; org.springframework.orm.jpa.support.WebAsyncManager . setAsyncWebRequest ( org.springframework.orm.jpa.support.AsyncWebRequest ) ; org.springframework.orm.jpa.support.WebAsyncManager . startCallableProcessing ( new java.util.concurrent.Callable<java.lang.String> < java.lang.String > ( ) { @ java.lang.Override public java.lang.String java.lang.String ( ) java.lang.Exception { return STRING ; } } ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . doFilter ( this . org.springframework.orm.jpa.support.MockHttpServletRequest , this . org.springframework.orm.jpa.support.MockHttpServletResponse , org.springframework.orm.jpa.support.FilterChain ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertEquals ( NUMBER , java.util.concurrent.atomic.AtomicInteger . int ( ) ) ; assertEquals ( NUMBER , java.util.concurrent.atomic.AtomicInteger . int ( ) ) ; assertNotNull ( org.springframework.orm.jpa.support.MockHttpServletRequest . getAttribute ( STRING ) ) ; verify ( org.springframework.orm.jpa.support.AsyncWebRequest , times ( NUMBER ) ) . addCompletionHandler ( any ( java.lang.Runnable .class ) ) ; verify ( org.springframework.orm.jpa.support.AsyncWebRequest ) . addTimeoutHandler ( any ( java.lang.Runnable .class ) ) ; verify ( org.springframework.orm.jpa.support.AsyncWebRequest , times ( NUMBER ) ) . addCompletionHandler ( any ( java.lang.Runnable .class ) ) ; verify ( org.springframework.orm.jpa.support.AsyncWebRequest ) . startAsync ( ) ; reset ( org.springframework.orm.jpa.support.AsyncWebRequest ) ; given ( org.springframework.orm.jpa.support.AsyncWebRequest . isAsyncStarted ( ) ) . willReturn ( false ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . doFilter ( this . org.springframework.orm.jpa.support.MockHttpServletRequest , this . org.springframework.orm.jpa.support.MockHttpServletResponse , org.springframework.orm.jpa.support.FilterChain ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertFalse ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; assertEquals ( NUMBER , java.util.concurrent.atomic.AtomicInteger . int ( ) ) ; assertEquals ( NUMBER , java.util.concurrent.atomic.AtomicInteger . int ( ) ) ; verify ( this . org.springframework.orm.jpa.support.EntityManager ) . close ( ) ; verify ( org.springframework.orm.jpa.support.EntityManager ) . close ( ) ; org.springframework.orm.jpa.support.StaticWebApplicationContext . close ( ) ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse ) { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.ServletRequest . setAttribute ( STRING , java.lang.Boolean . java.lang.Boolean ) ; java.util.concurrent.atomic.AtomicInteger . int ( ) ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public void void ( ServletRequest org.springframework.orm.jpa.support.ServletRequest , ServletResponse org.springframework.orm.jpa.support.ServletResponse )				throws java.io.IOException , org.springframework.orm.jpa.support.ServletException { assertTrue ( TransactionSynchronizationManager . hasResource ( org.springframework.orm.jpa.support.EntityManagerFactory ) ) ; org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter . doFilter ( org.springframework.orm.jpa.support.ServletRequest , org.springframework.orm.jpa.support.ServletResponse , org.springframework.orm.jpa.support.FilterChain ) ; java.util.concurrent.atomic.AtomicInteger . int ( ) ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public java.lang.String java.lang.String ( ) java.lang.Exception { return STRING ; }  <METHOD_END>
<METHOD_START> @ java.lang.Override public void void ( java.lang.Runnable java.lang.Runnable , long long ) { java.lang.Runnable . void ( ) ; }  <METHOD_END>
